<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Krishna, Will You Be My Valentine?</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --card-w: 380px;
      --anime: 170px;
      --title: 1.6rem;
      --couple: 150px;
    }
    @media (min-width: 768px){
      :root{
        --card-w: 460px;
        --anime: 220px;
        --title: 2rem;
        --couple: 190px;
      }
    }
    /* iPhone Plus / Pro Max height optimization */
    @media (min-height: 850px){
      :root{
        --anime: 240px;
        --couple: 200px;
      }
      .card{ padding: 2rem 1.8rem 1.9rem; }
    }

    body{
      margin:0;height:100vh;font-family:Inter,system-ui,sans-serif;
      background:linear-gradient(120deg,#ffe4e6,#ffd1dc,#fff1f2);
      background-size:200% 200%;
      animation:bgShift 12s ease infinite;
      display:flex;align-items:center;justify-content:center;overflow:hidden
    }
    @keyframes bgShift{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

    .postcard{
      position:fixed; inset:0; z-index:10;
      background:#fff; display:flex; align-items:center; justify-content:center;
      animation:fadeIn .6s ease;
    }
    .postcard-card{
      background:#fff; border-radius:22px; padding:2.2rem 2rem;
      box-shadow:0 20px 40px rgba(0,0,0,.12);
      text-align:center; cursor:pointer;
      animation:floatIn .8s ease;
    }
    .postcard h2{
      font-family:Pacifico,cursive; font-size:1.9rem; color:#be185d; margin:0 0 .3rem;
    }
    .postcard .heart{font-size:1.4rem; color:#e11d48}
    @keyframes floatIn{from{transform:translateY(12px);opacity:0}to{transform:translateY(0);opacity:1}}

    .card{
      background:rgba(255,255,255,0.92);backdrop-filter:blur(10px);
      padding:1.8rem 1.6rem 1.7rem;border-radius:26px;
      box-shadow:0 20px 40px rgba(236,72,153,0.25);
      text-align:center;width:92%;max-width:var(--card-w);
      animation:popIn .7s ease;z-index:5; display:none;
    }
    @keyframes popIn{from{transform:scale(.9);opacity:0}to{transform:scale(1);opacity:1}}

    h1{font-family:Pacifico,cursive;font-size:var(--title);color:#be185d;margin:.2rem 0 .2rem}
    .hint{font-size:.85rem;color:#64748b;margin:.25rem 0 .5rem}
    .sub{font-size:.95rem;color:#475569;margin-bottom:.4rem}

    .anime-box{width:var(--anime);height:var(--anime);margin:.4rem auto .7rem;display:flex;align-items:center;justify-content:center}
    .anime-box img{width:100%;height:100%;object-fit:contain;animation:float 3s ease-in-out infinite}
    @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}

    .btns{position:relative;height:120px;display:flex;gap:0.8rem;align-items:flex-start;justify-content:center}
    button{padding:.7rem 1.4rem;border:none;border-radius:999px;font-size:.95rem;cursor:pointer;box-shadow:0 8px 18px rgba(0,0,0,.12);transition:transform .15s ease, box-shadow .2s ease}
    #yes{
      background:linear-gradient(135deg,#ec4899,#fb7185);color:#fff;
      animation:yesPulse 3.5s ease-in-out infinite;
    }
    @keyframes yesPulse{
      0%,100%{box-shadow:0 0 0 rgba(236,72,153,0.0)}
      50%{box-shadow:0 0 22px rgba(236,72,153,0.45)}
    }
    #no{background:#f1f5f9;color:#334155;position:relative}
    #no.wiggle{animation:wiggle .25s ease-in-out}
    @keyframes wiggle{
      0%{transform:translateX(0)}
      25%{transform:translateX(-3px)}
      50%{transform:translateX(3px)}
      75%{transform:translateX(-2px)}
      100%{transform:translateX(0)}
    }

    .success{display:none;margin-top:.7rem;font-size:.95rem;color:#16a34a;font-weight:700;line-height:1.4;animation:fadeIn .6s ease}
    @keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}

    .final{
      display:none;position:fixed;inset:0;z-index:6;
      align-items:center;justify-content:center;text-align:center;padding:1.4rem;flex-direction:column;gap:.8rem;
      background:linear-gradient(rgba(255,228,230,.8),rgba(255,209,220,.8)),url('couple.jpg') center/cover no-repeat
    }
    .final::before{content:"";position:absolute;inset:0;backdrop-filter:blur(10px)}
    .final-inner{
      position:relative;z-index:2;background:rgba(255,255,255,.92);
      border-radius:22px;padding:1.1rem 1.1rem 1.2rem;
      box-shadow:0 20px 40px rgba(236,72,153,.25);max-width:460px;width:100%
    }
    .final h2{font-family:Pacifico,cursive;font-size:2rem;color:#be185d;margin:.2rem 0}
    .final p{font-size:1rem;color:#334155}
    .tiny-photo{width:var(--couple);height:var(--couple);border-radius:18px;object-fit:cover;box-shadow:0 10px 20px rgba(0,0,0,.2);border:3px solid #fff;margin:.35rem auto .45rem}
    .replay{padding:.55rem 1.3rem;border-radius:999px;border:none;background:linear-gradient(135deg,#ec4899,#fb7185);color:#fff;font-size:.95rem;cursor:pointer;box-shadow:0 8px 18px rgba(0,0,0,.15)}

    .secret{
      display:none;position:fixed;bottom:16px;left:50%;transform:translateX(-50%);
      background:#fff0f6;color:#be185d;padding:.6rem 1rem;border-radius:999px;
      box-shadow:0 8px 18px rgba(236,72,153,.25);font-size:.85rem;z-index:8;animation:fadeIn .4s ease
    }
    .heart{
      position:absolute;bottom:-20px;font-size:18px;opacity:.95;color:#e11d48;
      animation:floatUp 5s linear infinite;pointer-events:none
    }
    @keyframes floatUp{0%{transform:translateY(0) scale(.9);opacity:0}10%{opacity:.95}100%{transform:translateY(-110vh) scale(1.5);opacity:0}}
    .rainbow{
      position:fixed; inset:0; z-index:9; pointer-events:none;
      background:radial-gradient(circle at center, rgba(255,0,150,.15), rgba(0,150,255,.12), rgba(255,255,255,0));
      animation:rainbowFlash .8s ease forwards;
    }
    @keyframes rainbowFlash{from{opacity:0}50%{opacity:1}to{opacity:0}}
  </style>
</head>
<body>

  <audio id="bgMusic" src="bg-music.mp3" loop></audio>
  <audio id="kissSound" src="kiss.mp3"></audio>
  <audio id="openSound" src="open.mp3"></audio>

  <!-- Postcard opener -->
  <div class="postcard" id="postcard">
    <div class="postcard-card" id="openCard">
      <h2>From Mimi</h2>
      <div class="heart">‚ù§Ô∏è</div>
      <div style="font-size:.85rem;color:#64748b;margin-top:.4rem">Tap to open</div>
    </div>
  </div>

  <!-- Main card -->
  <div class="card" id="card">
    <h1>Krishna, will you be my Valentine?</h1>
    <div class="hint">Psst‚Ä¶ try clicking ‚ÄúNo‚Äù once üòè</div>
    <div class="sub">From Mimi üíñ</div>

    <div class="anime-box">
      <img id="animeImg" src="kiss.png" alt="anime">
    </div>

    <div class="btns" id="btns">
      <button id="yes">Yes</button>
      <button id="no">No</button>
    </div>

  <!-- Final screen -->
  <div class="final" id="final">
    <div class="final-inner">
      <img src="couple.jpg" class="tiny-photo" alt="Us" id="couplePhoto">
      <h2>You‚Äôre my Valentine, Krishna üíó</h2>
      <p style="font-weight:600;color:#be185d;margin:.2rem 0 .4rem">
  You just made Mimi smile so wide üíï<br>
  I just wanted to see you smile like this.
</p>
      <p>Love, Mimi</p>
      <p style="font-size:.85rem;color:#64748b">
  Tip: Shake your phone üòâ<br>
  <span style="font-size:.8rem;opacity:.8">Can‚Äôt shake? Tap the photo twice üòâ</span>
</p>
      <button class="replay" id="replayBtn">Replay üí´</button>
    </div>
  </div>

  <div class="secret" id="secretNo">Why babe? Don‚Äôt you love me????</div>
  <div class="secret" id="longPressMsg">I love you more babe ‚ô•Ô∏è</div>
  <div class="secret" id="multiYesMsg">I love you a lot and I miss you even more</div>
  <div class="secret" id="photoSecret">I miss you</div>

  <script>
    const postcard=document.getElementById("postcard");
    const openCard=document.getElementById("openCard");
    const card=document.getElementById("card");

    const noBtn=document.getElementById("no"),yesBtn=document.getElementById("yes"),
      success=document.getElementById("success"),animeImg=document.getElementById("animeImg"),
      finalScreen=document.getElementById("final"),replayBtn=document.getElementById("replayBtn"),
      music=document.getElementById("bgMusic"),kissSound=document.getElementById("kissSound"),
      openSound=document.getElementById("openSound"),
      secretNo=document.getElementById("secretNo"),longPressMsg=document.getElementById("longPressMsg"),
      multiYesMsg=document.getElementById("multiYesMsg"),photoSecret=document.getElementById("photoSecret"),
      btns=document.getElementById("btns"),couplePhoto=document.getElementById("couplePhoto");

    const images=["kiss.png","selfie.png","lipstick.png"];
    let i=0,noClicks=0,yesClicks=0,pressTimer,scale=1,hasShaken=false,lastShake=0,photoPressTimer;

    setInterval(()=>animeImg.src=images[i=(i+1)%images.length],2200);

    openCard.addEventListener("click", async ()=>{
  openSound.currentTime=0; openSound.play().catch(()=>{});
  if(navigator.vibrate) navigator.vibrate(20);

  // Ask for motion permission on iOS
  if (typeof DeviceMotionEvent !== "undefined" && typeof DeviceMotionEvent.requestPermission === "function") {
    try {
      const response = await DeviceMotionEvent.requestPermission();
      console.log("Motion permission:", response);
    } catch (e) {
      console.log("Motion permission error", e);
    }
  }

  spawnHearts(30);
  const rb=document.createElement("div"); rb.className="rainbow"; document.body.appendChild(rb);
  setTimeout(()=>rb.remove(),900);
  postcard.style.display="none";
  card.style.display="block";
});


    function moveNo(){
      noBtn.classList.add("wiggle");
      setTimeout(()=>noBtn.classList.remove("wiggle"),200);
      const rect=btns.getBoundingClientRect();
      const x=Math.random()*(rect.width-60);
      const y=Math.random()*(rect.height-40);
      noBtn.style.position="absolute";
      noBtn.style.left=x+"px";
      noBtn.style.top=y+"px";
    }
    noBtn.addEventListener("mouseenter",moveNo);
    noBtn.addEventListener("touchstart",moveNo);
    noBtn.addEventListener("click",()=>{noClicks++;moveNo();if(noClicks===3){secretNo.style.display="block";setTimeout(()=>secretNo.style.display="none",3000)}});

    function showLongPressYes(){
      kissSound.currentTime=0; kissSound.play().catch(()=>{});
      longPressMsg.style.display="block"; setTimeout(()=>longPressMsg.style.display="none",3000);
    }
    yesBtn.addEventListener("mousedown",()=>pressTimer=setTimeout(showLongPressYes,700));
    yesBtn.addEventListener("mouseup",()=>clearTimeout(pressTimer));
    yesBtn.addEventListener("touchstart",()=>pressTimer=setTimeout(showLongPressYes,700));
    yesBtn.addEventListener("touchend",()=>clearTimeout(pressTimer));

    yesBtn.addEventListener("click",()=>{
  yesClicks++; scale+=.06; yesBtn.style.transform=`scale(${scale})`;
  if(navigator.vibrate) navigator.vibrate([120,60,120]);
  music.play().catch(()=>{}); spawnHearts(24);

  // Show success message after a short, sweet delay
  setTimeout(()=>{
    success.style.display="block";
  }, 500);

  if(yesClicks>1){
    setTimeout(()=>{
      multiYesMsg.style.display="block";
      setTimeout(()=>multiYesMsg.style.display="none",3000);
    }, 700);
  }

  setTimeout(()=>{
    finalScreen.style.display="flex";
    spawnHearts(60);
  }, 1500);
});


    replayBtn.addEventListener("click",()=>{
      finalScreen.style.display="none"; success.style.display="none";
      noClicks=0; yesClicks=0; scale=1; yesBtn.style.transform="scale(1)";
      hasShaken=false; music.currentTime=0;
      noBtn.style.position="relative"; noBtn.style.left=""; noBtn.style.top="";
      spawnHearts(40);
    });

    couplePhoto.addEventListener("mousedown",()=>photoPressTimer=setTimeout(()=>{
      photoSecret.style.display="block"; setTimeout(()=>photoSecret.style.display="none",2500);
    },700));
    couplePhoto.addEventListener("mouseup",()=>clearTimeout(photoPressTimer));
    couplePhoto.addEventListener("touchstart",()=>photoPressTimer=setTimeout(()=>{
      photoSecret.style.display="block"; setTimeout(()=>photoSecret.style.display="none",2500);
    },700));
    couplePhoto.addEventListener("touchend",()=>clearTimeout(photoPressTimer));
    // Double-tap fallback for iOS if shake doesn't work
let lastTap = 0;
couplePhoto.addEventListener("touchend", () => {
  const now = Date.now();
  if (now - lastTap < 350) {
    const msg = document.createElement("div");
    msg.className = "secret";
    msg.textContent = "Miss you, come home soon";
    document.body.appendChild(msg);
    setTimeout(() => {
      msg.style.opacity = "0";
      setTimeout(() => msg.remove(), 800);
    }, 1800);
  }
  lastTap = now;
});


    window.addEventListener("devicemotion",(e)=>{
      const acc=e.accelerationIncludingGravity;
      if(!acc||hasShaken||finalScreen.style.display!=="flex")return;
      const mag=Math.abs(acc.x)+Math.abs(acc.y)+Math.abs(acc.z), now=Date.now();
      if(mag>30 && now-lastShake>800){
        lastShake=now; hasShaken=true;
        const msg=document.createElement("div"); msg.className="secret"; msg.textContent="Miss you, come home soon";
        document.body.appendChild(msg);
        setTimeout(()=>{ msg.style.opacity="0"; setTimeout(()=>msg.remove(),800); },1800);
      }
    });

    function spawnHearts(n){
      for(let j=0;j<n;j++){
        const h=document.createElement("div"); h.className="heart"; h.textContent="‚ù§";
        h.style.left=Math.random()*100+"vw";
        h.style.animationDuration=3+Math.random()*3+"s";
        document.body.appendChild(h);
        setTimeout(()=>h.remove(),7000);
      }
    }
  </script>
</body>
</html>


